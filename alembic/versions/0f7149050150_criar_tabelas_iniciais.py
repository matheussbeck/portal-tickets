"""criar tabelas iniciais

Revision ID: 0f7149050150
Revises: 
Create Date: 2026-01-21 13:10:55.710503

"""
from typing import Sequence, Union

from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision: str = '0f7149050150'
down_revision: Union[str, None] = None
branch_labels: Union[str, Sequence[str], None] = None
depends_on: Union[str, Sequence[str], None] = None


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table('forms',
    sa.Column('form_name', sa.String(), nullable=False),
    sa.Column('form_description', sa.String(), nullable=True),
    sa.Column('form_ticket_class', sa.Enum('PROJETO', 'RELATORIO', name='formclasse'), nullable=False),
    sa.Column('form_type', sa.Enum('ALTERACAO', 'BUG', 'CORRECAO', 'DESENVOLVIMENTO', 'MELHORIA', name='formtipo'), nullable=False),
    sa.Column('form_fields', sa.String(), nullable=False),
    sa.Column('form_is_default', sa.Boolean(), nullable=False),
    sa.Column('form_version', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('updated_by', sa.Integer(), nullable=True),
    sa.Column('deleted_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('deleted_by', sa.Integer(), nullable=True),
    sa.Column('active', sa.Enum('ATIVO', 'INATIVO', 'SUSPENSO', 'BLOQUEADO', 'EXCLUIDO', name='status'), nullable=False),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('teams',
    sa.Column('team_name', sa.String(), nullable=False),
    sa.Column('team_description', sa.String(), nullable=True),
    sa.Column('team_area', sa.Enum('EAB', 'PROJETOS', 'CIA', 'INDICADORES', name='area'), nullable=False),
    sa.Column('team_manager_id', sa.Integer(), nullable=True),
    sa.Column('team_location', sa.String(), nullable=True),
    sa.Column('team_cost_center', sa.String(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('updated_by', sa.Integer(), nullable=True),
    sa.Column('deleted_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('deleted_by', sa.Integer(), nullable=True),
    sa.Column('active', sa.Enum('ATIVO', 'INATIVO', 'SUSPENSO', 'BLOQUEADO', 'EXCLUIDO', name='status'), nullable=False),
    sa.ForeignKeyConstraint(['team_manager_id'], ['users.id'], name='fk_team_manager', ondelete='RESTRICT', use_alter=True),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('team_name')
    )
    op.create_table('users',
    sa.Column('user_corporative_id', sa.Integer(), nullable=False),
    sa.Column('user_full_name', sa.String(), nullable=False),
    sa.Column('user_email', sa.String(), nullable=False),
    sa.Column('user_password', sa.String(), nullable=False),
    sa.Column('user_photo', sa.String(), nullable=True),
    sa.Column('user_team_id', sa.Integer(), nullable=False),
    sa.Column('user_role', sa.Enum('N1', 'N2', 'GESTOR', 'ADMINISTRADOR', name='userroles'), nullable=False),
    sa.Column('user_tipo', sa.Enum('ATENDENTE', 'SOLICITANTE', 'ADMINISTRADOR', name='usertipo'), nullable=False),
    sa.Column('user_notification_preferences', sa.String(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('updated_by', sa.Integer(), nullable=True),
    sa.Column('deleted_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('deleted_by', sa.Integer(), nullable=True),
    sa.Column('active', sa.Enum('ATIVO', 'INATIVO', 'SUSPENSO', 'BLOQUEADO', 'EXCLUIDO', name='status'), nullable=False),
    sa.ForeignKeyConstraint(['user_team_id'], ['teams.id'], ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('user_corporative_id'),
    sa.UniqueConstraint('user_email')
    )
    op.create_table('projects',
    sa.Column('project_name', sa.String(), nullable=False),
    sa.Column('project_directory', sa.String(), nullable=False),
    sa.Column('project_description', sa.String(), nullable=False),
    sa.Column('project_category', sa.String(), nullable=True),
    sa.Column('project_methodology', sa.String(), nullable=True),
    sa.Column('project_tags', sa.Enum('ATRIBUIDO', 'ATRASADO', 'NO_PRAZO', name='projecttags'), nullable=False),
    sa.Column('project_priority', sa.Enum('MAXIMA', 'URGENTE', 'NORMAL', 'BACKLOG', name='projectpriority'), nullable=True),
    sa.Column('project_risk_level', sa.Enum('MUITO_ALTO', 'ALTO', 'MEDIO', 'BAIXO', 'SEM_RISCO', name='projectrisklevel'), nullable=True),
    sa.Column('project_team_responsible_id', sa.Integer(), nullable=False),
    sa.Column('project_manager_id', sa.Integer(), nullable=False),
    sa.Column('project_status_changed_by_id', sa.Integer(), nullable=True),
    sa.Column('project_status', sa.Enum('ATIVO', 'ABERTO', 'PENDENTE', 'PAUSADO', 'ENCERRADO', 'CANCELADO', name='projectstatus'), nullable=False),
    sa.Column('project_status_changed_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('project_start_date', sa.Date(), nullable=False),
    sa.Column('project_expected_end_date', sa.Date(), nullable=False),
    sa.Column('project_approved_at', sa.Date(), nullable=True),
    sa.Column('project_real_end_date', sa.Date(), nullable=True),
    sa.Column('project_planned_budget', sa.Double(), nullable=False),
    sa.Column('project_approved_budget', sa.Double(), nullable=True),
    sa.Column('project_spent_budget', sa.Double(), nullable=True),
    sa.Column('project_final_budget', sa.Double(), nullable=True),
    sa.Column('project_completion_percentage', sa.Double(), nullable=True),
    sa.Column('project_approvers_count', sa.Integer(), nullable=False),
    sa.Column('project_public', sa.Boolean(), nullable=False),
    sa.Column('project_scope', sa.String(), nullable=True),
    sa.Column('project_expected_benefits', sa.String(), nullable=True),
    sa.Column('project_risks', sa.String(), nullable=True),
    sa.Column('project_assumptions', sa.String(), nullable=True),
    sa.Column('project_constraints', sa.String(), nullable=True),
    sa.Column('project_milestones', sa.String(), nullable=True),
    sa.Column('project_tasks', sa.String(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('updated_by', sa.Integer(), nullable=True),
    sa.Column('deleted_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('deleted_by', sa.Integer(), nullable=True),
    sa.Column('active', sa.Enum('ATIVO', 'INATIVO', 'SUSPENSO', 'BLOQUEADO', 'EXCLUIDO', name='status'), nullable=False),
    sa.ForeignKeyConstraint(['project_manager_id'], ['users.id'], ondelete='RESTRICT'),
    sa.ForeignKeyConstraint(['project_status_changed_by_id'], ['users.id'], ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['project_team_responsible_id'], ['teams.id'], ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('project_directory'),
    sa.UniqueConstraint('project_name')
    )
    op.create_table('reports',
    sa.Column('report_name', sa.String(), nullable=False),
    sa.Column('report_link', sa.String(), nullable=False),
    sa.Column('report_description', sa.String(), nullable=False),
    sa.Column('report_frequency', sa.Enum('DIARIO', 'HORARIO', 'AGENDADO', 'SOB_DEMANDA', name='reportfrequency'), nullable=False),
    sa.Column('report_tags', sa.Enum('CIA', 'CCT', 'PRODUCAO', 'SSMA', 'CCO', 'MANUTENCAO', 'QUALIDADE', name='reporttags'), nullable=False),
    sa.Column('report_team_responsible_id', sa.Integer(), nullable=False),
    sa.Column('report_owner_id', sa.Integer(), nullable=False),
    sa.Column('report_status_changed_by_id', sa.Integer(), nullable=True),
    sa.Column('report_status', sa.Enum('ATIVO', 'MANUTENCAO', 'DESATUALIZADO', 'TESTE', 'INATIVO', 'DESENVOLVIMENTO', 'DIAGNOSTICO', name='reportstatus'), nullable=False),
    sa.Column('report_status_changed_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('report_data_last_update', sa.DateTime(), nullable=True),
    sa.Column('report_pbix_last_update', sa.DateTime(), nullable=True),
    sa.Column('report_public', sa.Boolean(), nullable=False),
    sa.Column('report_dataset_source', sa.String(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('updated_by', sa.Integer(), nullable=True),
    sa.Column('deleted_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('deleted_by', sa.Integer(), nullable=True),
    sa.Column('active', sa.Enum('ATIVO', 'INATIVO', 'SUSPENSO', 'BLOQUEADO', 'EXCLUIDO', name='status'), nullable=False),
    sa.ForeignKeyConstraint(['report_owner_id'], ['users.id'], ondelete='RESTRICT'),
    sa.ForeignKeyConstraint(['report_status_changed_by_id'], ['users.id'], ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['report_team_responsible_id'], ['teams.id'], ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('report_link'),
    sa.UniqueConstraint('report_name')
    )
    op.create_table('project_allowed_users',
    sa.Column('project_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('updated_by', sa.Integer(), nullable=True),
    sa.Column('deleted_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('deleted_by', sa.Integer(), nullable=True),
    sa.Column('active', sa.Enum('ATIVO', 'INATIVO', 'SUSPENSO', 'BLOQUEADO', 'EXCLUIDO', name='status'), nullable=False),
    sa.ForeignKeyConstraint(['project_id'], ['projects.id'], ondelete='CASCADE'),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ondelete='CASCADE'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('project_analysts',
    sa.Column('project_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('assigned_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('updated_by', sa.Integer(), nullable=True),
    sa.Column('deleted_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('deleted_by', sa.Integer(), nullable=True),
    sa.Column('active', sa.Enum('ATIVO', 'INATIVO', 'SUSPENSO', 'BLOQUEADO', 'EXCLUIDO', name='status'), nullable=False),
    sa.ForeignKeyConstraint(['project_id'], ['projects.id'], ondelete='CASCADE'),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ondelete='CASCADE'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('project_approvals',
    sa.Column('project_id', sa.Integer(), nullable=False),
    sa.Column('approver_id', sa.Integer(), nullable=False),
    sa.Column('approval_order', sa.Integer(), nullable=False),
    sa.Column('status', sa.Enum('PENDENTE', 'APROVADO', 'REJEITADO', name='approvalstatus'), nullable=False),
    sa.Column('approved_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('comments', sa.String(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('updated_by', sa.Integer(), nullable=True),
    sa.Column('deleted_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('deleted_by', sa.Integer(), nullable=True),
    sa.Column('active', sa.Enum('ATIVO', 'INATIVO', 'SUSPENSO', 'BLOQUEADO', 'EXCLUIDO', name='status'), nullable=False),
    sa.ForeignKeyConstraint(['approver_id'], ['users.id'], ondelete='RESTRICT'),
    sa.ForeignKeyConstraint(['project_id'], ['projects.id'], ondelete='CASCADE'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('project_clients',
    sa.Column('project_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('updated_by', sa.Integer(), nullable=True),
    sa.Column('deleted_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('deleted_by', sa.Integer(), nullable=True),
    sa.Column('active', sa.Enum('ATIVO', 'INATIVO', 'SUSPENSO', 'BLOQUEADO', 'EXCLUIDO', name='status'), nullable=False),
    sa.ForeignKeyConstraint(['project_id'], ['projects.id'], ondelete='CASCADE'),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ondelete='CASCADE'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('project_owners',
    sa.Column('project_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('updated_by', sa.Integer(), nullable=True),
    sa.Column('deleted_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('deleted_by', sa.Integer(), nullable=True),
    sa.Column('active', sa.Enum('ATIVO', 'INATIVO', 'SUSPENSO', 'BLOQUEADO', 'EXCLUIDO', name='status'), nullable=False),
    sa.ForeignKeyConstraint(['project_id'], ['projects.id'], ondelete='CASCADE'),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ondelete='CASCADE'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('project_sponsors',
    sa.Column('project_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('updated_by', sa.Integer(), nullable=True),
    sa.Column('deleted_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('deleted_by', sa.Integer(), nullable=True),
    sa.Column('active', sa.Enum('ATIVO', 'INATIVO', 'SUSPENSO', 'BLOQUEADO', 'EXCLUIDO', name='status'), nullable=False),
    sa.ForeignKeyConstraint(['project_id'], ['projects.id'], ondelete='CASCADE'),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ondelete='CASCADE'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('report_allowed_users',
    sa.Column('report_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('updated_by', sa.Integer(), nullable=True),
    sa.Column('deleted_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('deleted_by', sa.Integer(), nullable=True),
    sa.Column('active', sa.Enum('ATIVO', 'INATIVO', 'SUSPENSO', 'BLOQUEADO', 'EXCLUIDO', name='status'), nullable=False),
    sa.ForeignKeyConstraint(['report_id'], ['reports.id'], ondelete='CASCADE'),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ondelete='CASCADE'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('tickets',
    sa.Column('ticket_title', sa.String(), nullable=False),
    sa.Column('ticket_description', sa.String(), nullable=False),
    sa.Column('ticket_class', sa.Enum('PROJETO', 'RELATORIO', name='ticketclasse'), nullable=False),
    sa.Column('ticket_type', sa.Enum('ALTERACAO', 'BUG', 'CORRECAO', 'DESENVOLVIMENTO', 'MELHORIA', name='tickettipo'), nullable=False),
    sa.Column('ticket_priority', sa.Enum('MAXIMA', 'URGENTE', 'NORMAL', 'BACKLOG', name='ticketpriority'), nullable=True),
    sa.Column('ticket_impact', sa.Enum('MUITO_ALTO', 'ALTO', 'MEDIO', 'BAIXO', 'SEM_IMPACTO', name='ticketimpacto'), nullable=True),
    sa.Column('ticket_client_id', sa.Integer(), nullable=False),
    sa.Column('ticket_form_id', sa.Integer(), nullable=False),
    sa.Column('ticket_project_id', sa.Integer(), nullable=True),
    sa.Column('ticket_report_id', sa.Integer(), nullable=True),
    sa.Column('ticket_status_changed_by_id', sa.Integer(), nullable=True),
    sa.Column('ticket_closed_by_id', sa.Integer(), nullable=True),
    sa.Column('ticket_status', sa.Enum('ATIVO', 'ABERTO', 'PENDENTE', 'PAUSADO', 'ENCERRADO', 'CANCELADO', name='ticketstatus'), nullable=False),
    sa.Column('ticket_status_changed_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('ticket_deadline', sa.DateTime(timezone=True), nullable=True),
    sa.Column('ticket_closed_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('ticket_mail_sent_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('ticket_estimated_hours', sa.Double(), nullable=True),
    sa.Column('ticket_actual_hours', sa.Double(), nullable=True),
    sa.Column('ticket_satisfaction_rating', sa.Integer(), nullable=True),
    sa.Column('ticket_attachments', sa.String(), nullable=True),
    sa.Column('ticket_resolution_notes', sa.String(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('updated_by', sa.Integer(), nullable=True),
    sa.Column('deleted_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('deleted_by', sa.Integer(), nullable=True),
    sa.Column('active', sa.Enum('ATIVO', 'INATIVO', 'SUSPENSO', 'BLOQUEADO', 'EXCLUIDO', name='status'), nullable=False),
    sa.ForeignKeyConstraint(['ticket_client_id'], ['users.id'], ondelete='RESTRICT'),
    sa.ForeignKeyConstraint(['ticket_closed_by_id'], ['users.id'], ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['ticket_form_id'], ['forms.id'], ondelete='RESTRICT'),
    sa.ForeignKeyConstraint(['ticket_project_id'], ['projects.id'], ondelete='CASCADE'),
    sa.ForeignKeyConstraint(['ticket_report_id'], ['reports.id'], ondelete='CASCADE'),
    sa.ForeignKeyConstraint(['ticket_status_changed_by_id'], ['users.id'], ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('user_project_follows',
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('project_id', sa.Integer(), nullable=False),
    sa.Column('followed_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('updated_by', sa.Integer(), nullable=True),
    sa.Column('deleted_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('deleted_by', sa.Integer(), nullable=True),
    sa.Column('active', sa.Enum('ATIVO', 'INATIVO', 'SUSPENSO', 'BLOQUEADO', 'EXCLUIDO', name='status'), nullable=False),
    sa.ForeignKeyConstraint(['project_id'], ['projects.id'], ondelete='CASCADE'),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ondelete='CASCADE'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('user_report_follows',
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('report_id', sa.Integer(), nullable=False),
    sa.Column('followed_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('updated_by', sa.Integer(), nullable=True),
    sa.Column('deleted_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('deleted_by', sa.Integer(), nullable=True),
    sa.Column('active', sa.Enum('ATIVO', 'INATIVO', 'SUSPENSO', 'BLOQUEADO', 'EXCLUIDO', name='status'), nullable=False),
    sa.ForeignKeyConstraint(['report_id'], ['reports.id'], ondelete='CASCADE'),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ondelete='CASCADE'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('chats',
    sa.Column('chat_ticket_id', sa.Integer(), nullable=False),
    sa.Column('chat_title', sa.String(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('updated_by', sa.Integer(), nullable=True),
    sa.Column('deleted_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('deleted_by', sa.Integer(), nullable=True),
    sa.Column('active', sa.Enum('ATIVO', 'INATIVO', 'SUSPENSO', 'BLOQUEADO', 'EXCLUIDO', name='status'), nullable=False),
    sa.ForeignKeyConstraint(['chat_ticket_id'], ['tickets.id'], ondelete='CASCADE'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('chat_ticket_id')
    )
    op.create_table('ticket_attendants',
    sa.Column('ticket_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('assigned_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('updated_by', sa.Integer(), nullable=True),
    sa.Column('deleted_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('deleted_by', sa.Integer(), nullable=True),
    sa.Column('active', sa.Enum('ATIVO', 'INATIVO', 'SUSPENSO', 'BLOQUEADO', 'EXCLUIDO', name='status'), nullable=False),
    sa.ForeignKeyConstraint(['ticket_id'], ['tickets.id'], ondelete='CASCADE'),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ondelete='CASCADE'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('ticket_teams',
    sa.Column('ticket_id', sa.Integer(), nullable=False),
    sa.Column('team_id', sa.Integer(), nullable=False),
    sa.Column('assigned_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('updated_by', sa.Integer(), nullable=True),
    sa.Column('deleted_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('deleted_by', sa.Integer(), nullable=True),
    sa.Column('active', sa.Enum('ATIVO', 'INATIVO', 'SUSPENSO', 'BLOQUEADO', 'EXCLUIDO', name='status'), nullable=False),
    sa.ForeignKeyConstraint(['team_id'], ['teams.id'], ondelete='CASCADE'),
    sa.ForeignKeyConstraint(['ticket_id'], ['tickets.id'], ondelete='CASCADE'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('user_ticket_follows',
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('ticket_id', sa.Integer(), nullable=False),
    sa.Column('followed_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('updated_by', sa.Integer(), nullable=True),
    sa.Column('deleted_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('deleted_by', sa.Integer(), nullable=True),
    sa.Column('active', sa.Enum('ATIVO', 'INATIVO', 'SUSPENSO', 'BLOQUEADO', 'EXCLUIDO', name='status'), nullable=False),
    sa.ForeignKeyConstraint(['ticket_id'], ['tickets.id'], ondelete='CASCADE'),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ondelete='CASCADE'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('messages',
    sa.Column('message_chat_id', sa.Integer(), nullable=False),
    sa.Column('message_user_id', sa.Integer(), nullable=False),
    sa.Column('message_content', sa.String(), nullable=False),
    sa.Column('message_type', sa.String(), nullable=False),
    sa.Column('message_attachments', sa.String(), nullable=True),
    sa.Column('message_is_internal', sa.Boolean(), nullable=False),
    sa.Column('message_edited_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('updated_by', sa.Integer(), nullable=True),
    sa.Column('deleted_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('deleted_by', sa.Integer(), nullable=True),
    sa.Column('active', sa.Enum('ATIVO', 'INATIVO', 'SUSPENSO', 'BLOQUEADO', 'EXCLUIDO', name='status'), nullable=False),
    sa.ForeignKeyConstraint(['message_chat_id'], ['chats.id'], ondelete='CASCADE'),
    sa.ForeignKeyConstraint(['message_user_id'], ['users.id'], ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id')
    )
    # ### end Alembic commands ###


def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_table('messages')
    op.drop_table('user_ticket_follows')
    op.drop_table('ticket_teams')
    op.drop_table('ticket_attendants')
    op.drop_table('chats')
    op.drop_table('user_report_follows')
    op.drop_table('user_project_follows')
    op.drop_table('tickets')
    op.drop_table('report_allowed_users')
    op.drop_table('project_sponsors')
    op.drop_table('project_owners')
    op.drop_table('project_clients')
    op.drop_table('project_approvals')
    op.drop_table('project_analysts')
    op.drop_table('project_allowed_users')
    op.drop_table('reports')
    op.drop_table('projects')
    op.drop_table('users')
    op.drop_table('teams')
    op.drop_table('forms')
    # ### end Alembic commands ###