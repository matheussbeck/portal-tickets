# ============================================================================
# ALEMBIC - Configuração de Migrations
# ============================================================================
# Este arquivo controla como o Alembic gerencia as migrations do banco.
#
# IMPORTANTE: Nunca commite este arquivo com credenciais de produção!
# Use variáveis de ambiente ou sobrescreva sqlalchemy.url no env.py
# ============================================================================

[alembic]
# Onde estão os scripts de migration
script_location = alembic

# Permite imports relativos (necessário para importar suas entidades)
prepend_sys_path = .

# ============================================================================
# URL DO BANCO DE DADOS
# ============================================================================
# DESENVOLVIMENTO: SQLite local
sqlalchemy.url = sqlite:///database/portal.db

# PRODUÇÃO: PostgreSQL (descomente e configure)
# sqlalchemy.url = postgresql://user:password@localhost:5432/portal

# ============================================================================
# TEMPLATE DE MIGRATION
# ============================================================================
# Define o formato do nome dos arquivos de migration gerados
# Padrão: {rev}_{slug}.py → ex: a1b2c3d4_create_users_table.py
# file_template = %%(year)d_%%(month).2d_%%(day).2d_%%(hour).2d%%(minute).2d-%%(rev)s_%%(slug)s

# ============================================================================
# LOGGING - Configuração OBRIGATÓRIA
# ============================================================================
# Sem esta seção, Alembic retorna: KeyError: 'formatters'

[loggers]
keys = root,sqlalchemy,alembic

[handlers]
keys = console

[formatters]
keys = generic

[logger_root]
level = WARN
handlers = console
qualname =

[logger_sqlalchemy]
level = WARN
handlers =
qualname = sqlalchemy.engine

[logger_alembic]
level = INFO
handlers =
qualname = alembic

[handler_console]
class = StreamHandler
args = (sys.stderr,)
level = NOTSET
formatter = generic

[formatter_generic]
format = %(levelname)-5.5s [%(name)s] %(message)s
datefmt = %H:%M:%S
